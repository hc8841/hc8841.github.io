<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HenriqueOS</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<link id="favicon" rel="icon"
  href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 16 16%22><text x=%220%22 y=%2212%22 font-size=%2216%22>$</text></svg>">

<style>
  body { background:black; color:#00ff00; font-family:monospace; margin:0 }
  #terminal { padding:20px }
  .line { white-space:pre-wrap }
  #input-line { display:flex; gap:6px }
  #cmd { background:black; border:none; color:inherit; outline:none; flex:1 }
  a { color:inherit; text-decoration:underline }
</style>
</head>

<body>
<div id="terminal" class="container-fluid"></div>

<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script>
$(function () {

  const terminal = $("#terminal");
  let sudoMode = false;
  let history = [], historyIndex = 0;

  const files = {
    "kernel_panic.txt": "Kernel panic - not syncing: curiosity overflow.",
    "coffee_dependency.md": "System cannot boot without caffeine.\nSeverity: critical.",
    "stackoverflow.log": "Searched same error 37 times.\nSolution ignored.",
    "deprecated_code.c": "// TODO: rewrite this in Rust\n// TODO: never happens",
    "todo_fix_later.sh": "#!/bin/bash\necho \"One day...\"",
    "segfault_notes.txt": "If it crashes, it's probably a pointer.",
  };

  function print(text) {
    $("<div class='line'>").html(text).appendTo(terminal);
    terminal.scrollTop(terminal[0].scrollHeight);
  }

  function setFavicon(c) {
    $("#favicon").attr("href",
      `data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 16 16%22><text x=%220%22 y=%2212%22 font-size=%2216%22>${c}</text></svg>`
    );
  }

  /* ---------- BOOT ---------- */
  const boot = [
    "HenriqueOS bootloader v1.1",
    "Initializing hardware...",
    "Loading kernel modules...",
    "Mounting /dev/sda1...",
    "Starting fakebash...",
    "",
    "System ready. Type 'help'.",
    ""
  ];

  let i = 0;
  function bootSequence() {
    if (i < boot.length) {
      print(boot[i++]);
      setTimeout(bootSequence, 300);
    } else startTerminal();
  }

  /* ---------- TERMINAL ---------- */
  function startTerminal() {
    terminal.append(`
      <div id="input-line">
        <span id="prompt">$</span>
        <input id="cmd" autofocus>
      </div>
    `);
    $("#cmd").on("keydown", handleInput).focus();
  }

  function handleInput(e) {
    const input = $("#cmd");

    if (e.key === "ArrowUp") {
      if (historyIndex > 0) input.val(history[--historyIndex]);
      return;
    }
    if (e.key === "ArrowDown") {
      if (historyIndex < history.length - 1) input.val(history[++historyIndex]);
      else input.val("");
      return;
    }

    if (e.key !== "Enter") return;

    const raw = input.val();
    const cmd = raw.trim().toLowerCase();
    print(`${$("#prompt").text()} ${raw}`);

    if (cmd) history.push(raw);
    historyIndex = history.length;
    input.val("");

    if (cmd === "clear") {
      terminal.find(".line").remove();
      return;
    }

    if (cmd === "ls") {
      print(Object.keys(files).join("   "));
      return;
    }

    if (cmd.startsWith("cat ")) {
      const file = cmd.split(" ")[1];
      print(files[file] || "cat: file not found");
      return;
    }

    if (cmd === "shutdown now") {
      print("Shutting down...");
      setTimeout(() => {
        print("System halted.");
        window.close();
      }, 1500);
      return;
    }

    if (cmd === "sudo") {
      sudoMode = true;
      terminal.css("color","red");
      $("#prompt").text("#");
      setFavicon("#");
      print("Permission denied. You are now suspicious.");
      return;
    }

    if (cmd === "exit" && sudoMode) {
      sudoMode = false;
      terminal.css("color","#00ff00");
      $("#prompt").text("$");
      setFavicon("$");
      print("Exited sudo mode.");
      return;
    }

    const responses = {
      help: `
help about skills experience contact certificates
whoami neofetch ls cat clear shutdown exit
`,
      whoami: "henrique",
      neofetch: "HenriqueOS | fakebash | uptime: since load",
      about: "Henrique Chaves â€” hardware, low level, infosec.",
      skills: "hardware | low level | security | curiosity",
      experience: "Condor | Raia Drogasil | SDB Alimentos",
      contact: "github.com/hc8841 | linkedin.com/in/henrique-chaves"
    };

    print(responses[cmd] || "command not found.");
  }

  bootSequence();
});
</script>
</body>
</html>