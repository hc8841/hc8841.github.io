<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HenriqueOS</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<link id="favicon" rel="icon"
  href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 16 16%22><text x=%220%22 y=%2212%22 font-size=%2216%22>$</text></svg>">

<style>
  body { background:black; color:#00ff00; font-family:monospace; margin:0 }
  #terminal { padding:20px }
  .line { white-space:pre-wrap }
  #input-line { display:flex; gap:6px }
  #prompt { min-width:10px }
  #cmd { background:black; border:none; color:inherit; outline:none; flex:1 }
  a { color:inherit; text-decoration:underline }
</style>
</head>

<body>
<div id="terminal" class="container-fluid"></div>

<script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
<script>
$(function () {

  const terminal = $("#terminal");
  let sudoMode = false;
  let history = [], historyIndex = 0;

  const files = [
    "certificates/",
    "kernel_panic.txt",
    "deprecated_code.c",
    "sudo_secrets/",
    "coffee_dependency.md",
    "stackoverflow.log",
    "segfault_notes.txt",
    "todo_fix_later.sh"
  ];

  function print(text) {
    $("<div class='line'>").html(text).appendTo(terminal);
    terminal.scrollTop(terminal[0].scrollHeight);
  }

  function setFavicon(c) {
    $("#favicon").attr("href",
      `data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 16 16%22><text x=%220%22 y=%2212%22 font-size=%2216%22>${c}</text></svg>`
    );
  }

  /* ---------- BOOT ---------- */
  const boot = [
    "HenriqueOS bootloader v1.0",
    "Initializing hardware...",
    "Loading kernel modules...",
    "Mounting /dev/sda1...",
    "Starting fakebash...",
    "",
    "System ready. Type 'help'.",
    ""
  ];

  let i = 0;
  function bootSequence() {
    if (i < boot.length) {
      print(boot[i++]);
      setTimeout(bootSequence, 350);
    } else {
      startTerminal();
    }
  }

  /* ---------- TERMINAL ---------- */
  function startTerminal() {
    terminal.append(`
      <div id="input-line">
        <span id="prompt">$</span>
        <input id="cmd" autofocus>
      </div>
    `);
    $("#cmd").on("keydown", handleInput).focus();
  }

  function handleInput(e) {
    const input = $("#cmd");

    if (e.key === "ArrowUp") {
      if (historyIndex > 0) input.val(history[--historyIndex]);
      return;
    }

    if (e.key === "ArrowDown") {
      if (historyIndex < history.length - 1) input.val(history[++historyIndex]);
      else input.val("");
      return;
    }

    if (e.key !== "Enter") return;

    const cmd = input.val().trim().toLowerCase();
    print(`${$("#prompt").text()} ${cmd}`);
    if (cmd) history.push(cmd);
    historyIndex = history.length;
    input.val("");

    if (cmd === "clear") {
      terminal.find(".line").remove();
      return;
    }

    if (cmd === "ls") {
      print(files.join("   "));
      return;
    }

    if (cmd === "sudo") {
      sudoMode = true;
      terminal.css("color","red");
      $("#prompt").text("#");
      setFavicon("#");
      print("permission denied. but nice try.");
      return;
    }

    if (cmd === "exit" && sudoMode) {
      sudoMode = false;
      terminal.css("color","#00ff00");
      $("#prompt").text("$");
      setFavicon("$");
      print("leaving sudo mode.");
      return;
    }

    const responses = {
      help: `
commands:
  help about skills experience contact certificates
  whoami neofetch ls clear exit
`,
      whoami: "henrique",
      neofetch: `
HenriqueOS
User: henrique
Shell: fakebash
Uptime: since page load
`,
      about: "Henrique Chaves — técnico em informática, hardware & low level.",
      skills: "hardware | low level | infosec | curiosity-driven",
      experience: "Condor | Raia Drogasil | SDB Alimentos",
      contact: "github.com/hc8841 | linkedin.com/in/henrique-chaves"
    };

    print(responses[cmd] || "command not found.");
  }

  bootSequence();
});
</script>
</body>
</html>